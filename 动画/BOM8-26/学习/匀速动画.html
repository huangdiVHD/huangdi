<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <style>
            *{
                margin: 0;
                padding: 0;
            }
            .box{
                position: relative;
                width: 200px;
                height: 200px;
                background-color: orange;
            }
        </style>
</head>
<body>
        <div class="box"></div>
        <button class="btn1">点击跳到400px</button>
        <button class="btn2">点击跳到800px</button>
        <script>
            var box = document.querySelector('.box');
            var btn1 = document.querySelector('.btn1');
            var btn2 = document.querySelector('.btn2');

            btn1.onclick = function () {
                //使用计数器,使得移动每隔17毫秒移动一次,若没有当点击时只执行一次,便停止
                var time = setInterval(function () {
                    //获取起点(要变化的起点),即要变化的元素与浏览器或者具有定位属性的距离,offsetLeft只能获取具有定位属性的元素
                    var spacing = box.offsetLeft;
                    //提供步数,即每次移动的距离 (当预期距离大于spacing时代表还没有到达位置)
                    var distance = 400 > spacing ? 11:-11;
                    spacing += distance;
                    console.log(spacing);
                    //将步数值重新赋值给起点,即代表变化元素要移动的距离
                    box.style.left = spacing + 'px';
                    //判断超出距离,如果超出则执行(在正负11之间,即有时候一些步数会导致不能完整到达预期的距离但其完全值小于等于步数就可以)
                    if (Math.abs(400-spacing) <= Math.abs(distance)) {
                        box.style.left = '400px';
                        console.log("stop ...");
                        clearInterval(time);
                    }
                }, 5);
                movement(box,400);
            }
            btn2.onclick = function () {
                // //使用计数器,使得移动每隔17毫秒移动一次,若没有当点击时只执行一次,便停止
                // var time = setInterval(function () {
                //     //获取起点(要变化的起点),即要变化的元素与浏览器或者具有定位属性的距离
                //     var spacing = box.offsetLeft;
                //     //提供步数,即每次移动的距离 (当预期距离大于spacing时代表还没有到达位置)
                //     var distance = 800 > spacing ? 11:-11;
                //     spacing += distance;
                //     console.log(spacing);
                //     //将步数值重新赋值给起点,即代表变化元素要移动的距离
                //     box.style.left = spacing + 'px';
                //     if (Math.abs(800-spacing) <= Math.abs(distance)) {
                //         box.style.left = '800px';
                //         console.log("stop ...");
                //         clearInterval(time);
                //     }
                // }, 5);
                movement(box,800);
            }
            function movement (ele,target) {
                 //使用计数器,使得移动每隔17毫秒移动一次,若没有当点击时只执行一次,便停止
                 var time = setInterval(function () {
                    //获取起点(要变化的起点),即要变化的元素与浏览器或者具有定位属性的距离
                    var spacing = ele.offsetLeft;
                    //提供步数,即每次移动的距离 (当预期距离大于spacing时代表还没有到达位置)
                    var distance = target > spacing ? 11:-11;
                    spacing += distance;
                    // console.log(spacing);
                    //将步数值重新赋值给起点,即代表变化元素要移动的距离
                    ele.style.left = spacing + 'px';
                    if (Math.abs(target-spacing) <= Math.abs(distance)) {
                        ele.style.left = target+'px';
                        console.log("stop ...");
                        clearInterval(time);
                    }
                }, 5);
            }
        </script>
</body>
</html>