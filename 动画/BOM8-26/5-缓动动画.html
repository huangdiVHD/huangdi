<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>缓动动画</title>
		<style>
			*{
				margin: 0;
				padding: 0;
			}
			.box{
				position: relative;
				width: 200px;
				height: 200px;
				background-color: orange;
			}
		</style>
	</head>
	<body>
		<div class="box"></div>
		
		<button class="btn1">点击跳到400px</button>
		<button class="btn2">点击跳到800px</button>
		
		<script type="text/javascript">
			var box = document.querySelector(".box");
			var btn1 = document.querySelectorAll("button")[0];
			var btn2 = document.querySelectorAll("button")[1];
			
			// 缓动动画的步长计算公式: step = (target - start) / 10;
			// step = (0,1)的一位小数  起点与终点的距离是一个 < 10 的整数, 每次走 1
			
			btn1.onclick = function (){
				// 声明定时器
				/*var timer = setInterval(function (){
					// 1. 获取起点
					var start = box.offsetLeft;
					// 2. 声明步长
					var step = (400 - start) / 10;
					// 判断步长,如果小于1  
					// if(step < 1){
					// 	step = 1;
					// }
					if(Math.abs(step) < 1){//  (-1,1)  1
						// (0,1) 取1  (-1,0] -1 || 0
						step = step > 0 ? 1 : Math.floor(step);
					}
					console.log("step ===>" + step);
					// 3. 运动
					box.style.left = start + step + "px";
					// 4. 判断是否到终点
					if(start + step === 400){
						console.log("stop ...");
						// 停止定时器
						clearInterval(timer);
					}
				},17)*/
				slowlyMove(box,400);
			}
			
			btn2.onclick = function (){
				// 声明定时器
				/*var timer = setInterval(function (){
					// 1. 获取起点
					var start = box.offsetLeft;
					// 2. 声明步长
					var step = (800 - start) / 10;
					// 判断步长,如果小于1
					if(step < 1){
						step = 1;
					}
					console.log("step ===>" + step);
					// 3. 运动
					box.style.left = start + step + "px";
					// 4. 判断是否到终点
					if(start + step === 800){
						console.log("stop ...");
						// 停止定时器
						clearInterval(timer);
					}
				},17)*/
				slowlyMove(box,800);
			}
			
			
			// 缓动函数封装
			/**
			 * @param {Object} ele	运动元素
			 * @param {Object} target	 运动的终点
			 */
			function slowlyMove(ele,target){
				// 声明定时器
				var timer = setInterval(function (){
					// 1. 获取起点
					var start = ele.offsetLeft;
					// 2. 声明步长
					var step = (target - start) / 10;
					// 判断步长,如果小于1  
					// if(step < 1){
					// 	step = 1;
					// }
					if(Math.abs(step) < 1){//  (-1,1)  1
						// (0,1) 取1  (-1,0] -1 || 0
						step = step > 0 ? 1 : Math.floor(step);
					}
					// console.log("step ===>" + step);
					// 3. 运动
					ele.style.left = start + step + "px";
					// 4. 判断是否到终点
					if(start + step === target){
						console.log("stop ...");
						// 停止定时器
						clearInterval(timer);
					}
				},17)
			}
			
		</script>
	</body>
</html>
